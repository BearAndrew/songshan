<div class="fixed top-14 sm:hidden mb-2 w-[calc(50vw-1.25rem)] z-50">
  <app-dropdown
    class="pl-4 w-full"
    [value]="data[activeIndex].value"
    [options]="data"
    (selectionChange)="onTabChange($event.value)"
  ></app-dropdown>
</div>

<div class="flex flex-col gap-4 w-full h-full">
  <div class="flex items-center gap-4 overflow-hidden ">
    <div class="hidden sm:flex flex-col items-end justify-between h-full">
      <div class="grid grid-cols-3 gap-2 h-fit w-110">
        @for (button of data; track button.label; let i = $index) {
          <button
            class="text-xl text-white text-center rounded-md px-2 py-0.5 cursor-pointer"
            [ngClass]="{
              'bg-[#b2b2b2]': activeIndex !== i,
              'bg-gradient-to-r from-[#767df5] to-[#82a2fc]': activeIndex === i,
              'col-span-3': i === data.length - 1,
            }"
            type="button"
            (click)="onTabChange(i)"
          >
            {{ button.label }}
          </button>
        }
      </div>

      @if (activeIndex !== data.length - 1) {
        <div class="p-2 text-2xl text-[#04cdda]">
          資料更新時間：{{ now | date: "HH:mm" }}
        </div>
      }
    </div>

    @if (activeIndex !== data.length - 1) {
      <div
        class="flex-1 grid-cols-1 sm:grid grid-cols-5 gap-2 bg-black p-2 h-full sm:max-h-50 min-h-50"
      >
        @for (group of locationGroups; track group.locationName) {
          <div class="relative bg-blackl h-46">
            <!-- 左上：locationName -->
            <label
              class="absolute left-0 top-0 z-10 px-1 text-xs text-[#ccc] bg-black"
            >
              {{ group.locationName }}
              @if (group.images[group.currentIndex]?.label) {
                ({{ group.images[group.currentIndex].label }})
              }
            </label>

            <!-- 當前圖片 -->
            @if (getCurrentImage(group)) {
              <img
                class="w-full h-full object-cover"
                [src]="getCurrentImage(group)"
                alt="camera"
              />
            }

            <!-- 左下角 icon -->
            <img
              class="absolute left-1 bottom-1 w-6"
              src="img/real-time/camera.png"
              alt="camera-icon"
            />
          </div>
        }
      </div>
    }
  </div>

  <div class="flex-1 overflow-hidden">
    <router-outlet></router-outlet>
  </div>
</div>
