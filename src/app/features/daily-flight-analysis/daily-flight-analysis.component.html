<div class="fixed top-14 sm:hidden mb-2 w-[calc(100vw-15.5rem)] z-50">
  <app-dropdown class="pl-4 w-full" [value]="0" [options]="mobileOptions" (selectionChange)="activeIndex = $event.value"></app-dropdown>
</div>

<div class="flex flex-col gap-4 w-full h-full">
  <div class="hidden sm:flex gap-8 h-fit">
    @for(button of data; track button.label; let i = $index) {
    <button
      class="text-xl text-white rounded-md w-36 px-2 py-0.5 cursor-pointer"
      [ngClass]="{
        'bg-[#b2b2b2]': activeIndex !== i,
        'bg-gradient-to-r from-[#767df5] to-[#82a2fc]': activeIndex === i
      }"
      type="button"
      (click)="activeIndex = i"
    >
      {{ button.label }}
    </button>
    }
  </div>

  <div class="flex flex-1 flex-col sm:flex-row gap-2 w-full min-h-0">
    <div class="flex flex-col flex-1 gap-2 min-w-0 h-full">
      <div class="flex flex-col sm:flex-row gap-2 w-full">
        <!-- 航班狀況 -->
        <app-daily-flight-analysis-flight-card
          class="card flex flex-1 flex-col gap-x-2 gap-y-4 p-4 pr-2 sm:pr-4 min-w-0 h-full"
          [data]="data"
          [activeIndex]="activeIndex"
        ></app-daily-flight-analysis-flight-card>

        <!-- 延誤狀況 -->
        <app-daily-flight-analysis-delay-card
          class="card flex flex-col flex-1 gap-x-2 gap-y-4 p-4 min-w-0 h-full"
          [data]="data"
          [activeIndex]="activeIndex"
        ></app-daily-flight-analysis-delay-card>
      </div>

      <!-- 航班延誤數據 -->
      <app-daily-flight-analysis-delay-pie-chart-card [inboundData]="inboundData" [outboundData]="outboundData" [pieCharData]="pieCharData"
        class="card flex flex-col flex-1 gap-2 p-4 min-w-0 h-fit"
      ></app-daily-flight-analysis-delay-pie-chart-card>
    </div>

    <div class="flex flex-col flex-1 gap-2 min-w-0 h-full">
      <!-- 異常航班資訊 -->
      <app-daily-flight-analysis-abnormal-card
        class="card flex flex-col flex-1 gap-2 p-4 w-full h-fit sm:h-auto sm:min-h-0"
        [activeIndex]="activeIndex"
        [inData]="abnormalInData"
        [outData]="abnormalOutData"
      ></app-daily-flight-analysis-abnormal-card>
      <app-daily-flight-analysis-barline-chart-card
        class="card flex flex-col flex-1 gap-2 p-4 w-full h-fit sm:h-auto min-h-100 sm:min-h-0"
        [activeIndex]="activeIndex"
        [barData]="outboundBarData"
        [lineData]="outboundLineData"
        [title]="'逐時出境統計'"
      ></app-daily-flight-analysis-barline-chart-card>
      <app-daily-flight-analysis-barline-chart-card
        class="card flex flex-col flex-1 gap-2 p-4 w-full h-fit sm:h-auto min-h-100 sm:min-h-0"
        [activeIndex]="activeIndex"
        [barData]="inboundBarData"
        [lineData]="inboundLineData"
        [title]="'逐時入境統計'"
      ></app-daily-flight-analysis-barline-chart-card>
    </div>
  </div>
</div>
